import { Component, EventEmitter, HostListener, Input, Output, ViewChild } from '@angular/core';
import * as i0 from "@angular/core";
import * as i1 from "ngx-bootstrap/datepicker";
import * as i2 from "ngx-bootstrap/timepicker";
import * as i3 from "ngx-bootstrap/dropdown";
import * as i4 from "./offclick.directive";
import * as i5 from "@angular/common";
import * as i6 from "@angular/forms";
export class DatetimePopupComponent {
    constructor(elementRef) {
        this.elementRef = elementRef;
        this.appendTo = undefined;
        this.valueChange = new EventEmitter();
        this.showPopup = false;
        this.showPopupChange = new EventEmitter();
        this.showDate = true;
        this.showTime = true;
        this.showWeeks = false;
        this.showMeridian = false;
        this.showSeconds = false;
        this.datepickerMode = 'day';
        this.initDate = null;
        this.minDate = null;
        this.maxDate = null;
        this.dateDisabled = [];
        this.minuteStep = 5;
        this.hourStep = 1;
        this.secondsStep = 1;
        this.localValue = null;
        this.isOpening = false;
        this.isDropUp = false;
    }
    ngOnChanges(changes) {
        if (!this.nowButton) {
            this.nowButton = { show: true, label: 'Now', cssClass: 'btn btn-secondary btn-sm' };
        }
        if (!this.clearButton) {
            this.clearButton = { show: true, label: 'Clear', cssClass: 'btn btn-secondary btn-sm' };
        }
        if (!this.closeButton) {
            this.closeButton = { show: true, label: 'Close', cssClass: 'btn btn-secondary btn-sm' };
        }
        // user maybe typing a value into an input box, so would come in as string
        if (typeof this.value === 'string') {
            // check if the string is a valid date
            if (!isNaN(new Date(this.value).getTime())) {
                this.localValue = new Date(this.value);
            }
        }
        else if (this.value) {
            this.localValue = this.value;
        }
        if (changes.showPopup && this.dropdown) {
            if (changes.showPopup.currentValue === true) {
                this.dropdown.show();
            }
            else if (changes.showPopup.currentValue === false) {
                this.dropdown.hide();
            }
        }
    }
    onWindowScroll() {
        const nativeEl = this.elementRef.nativeElement;
        const clientRect = nativeEl.getBoundingClientRect();
        const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
        const offsetTop = clientRect.top + window.pageYOffset;
        const height = clientRect.height;
        const dropdownEl = nativeEl.children.item(0);
        const menuEl = dropdownEl.children.length > 0 ? dropdownEl.children.item(0) : null;
        let menuHeight = this.showDate && this.showTime ? 402 : this.showDate ? 300 : 102;
        if (menuEl != null) {
            // get the style
            const display = menuEl.style.display;
            menuEl.style.display = 'block';
            menuHeight = menuEl.getBoundingClientRect().height;
            menuEl.style.display = display;
        }
        if ((offsetTop - menuHeight) <= 0) {
            this.isDropUp = false;
        }
        else {
            this.isDropUp = ((offsetTop + height + menuHeight) > (scrollTop + document.documentElement.clientHeight));
        }
    }
    onOpenChange(opened) {
        if (opened === true) {
            this.isOpening = true;
            this.onWindowScroll();
            this.dropdown.show();
            setTimeout(() => this.isOpening = false, 250);
        }
        else {
            this.showPopupChange.emit(false);
        }
    }
    onNow() {
        this.localValue = new Date();
        this.onPickerChange('timepicker');
    }
    onClear() {
        this.valueChange.emit(null);
    }
    onClose() {
        this.showPopupChange.emit(false);
    }
    onOffClick($event) {
        this.showPopupChange.emit(false);
    }
    onPickerChange(picker) {
        if (this.isOpening === true) {
            return;
        }
        if (picker === 'datepicker' && this.value != null) {
            const hours = this.value.getHours();
            const minutes = this.value.getMinutes();
            const seconds = this.value.getSeconds();
            const milliseconds = this.value.getMilliseconds();
            this.localValue.setHours(hours, minutes, seconds, milliseconds);
        }
        this.valueChange.emit(this.localValue);
        if (this.showDate === true && this.showTime === false) {
            this.dropdown.hide();
        }
    }
}
DatetimePopupComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.1.0", ngImport: i0, type: DatetimePopupComponent, deps: [{ token: i0.ElementRef }], target: i0.ɵɵFactoryTarget.Component });
DatetimePopupComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "13.1.0", type: DatetimePopupComponent, selector: "datetime-popup", inputs: { appendTo: "appendTo", value: "value", showPopup: "showPopup", showDate: "showDate", showTime: "showTime", showWeeks: "showWeeks", showMeridian: "showMeridian", showSeconds: "showSeconds", datepickerMode: "datepickerMode", initDate: "initDate", minDate: "minDate", maxDate: "maxDate", dateDisabled: "dateDisabled", nowButton: "nowButton", clearButton: "clearButton", closeButton: "closeButton", minuteStep: "minuteStep", hourStep: "hourStep", secondsStep: "secondsStep" }, outputs: { valueChange: "valueChange", showPopupChange: "showPopupChange" }, host: { listeners: { "window:scroll": "onWindowScroll()", "window:resize": "onWindowScroll()" } }, viewQueries: [{ propertyName: "dropdown", first: true, predicate: ["dropdown"], descendants: true, static: true }], usesOnChanges: true, ngImport: i0, template: "<div [container]=\"appendTo\" (isOpenChange)=\"onOpenChange($event)\" [dropup]=\"isDropUp\" dropdown #dropdown=\"bs-dropdown\" [autoClose]=\"false\" (offClick)=\"onOffClick($event)\">\r\n  <ul class=\"datetime-popup dropdown-menu\" role=\"menu\" [ngClass]=\"{ 'show': dropdown.isOpen === true, 'body-container': appendTo == 'body', 'dropdown': !isDropUp, 'dropup': isDropUp }\" *dropdownMenu>\r\n    <li class=\"my-2 mx-2\">\r\n      <datepicker *ngIf=\"showDate\"\r\n                  [(ngModel)]=\"localValue\"\r\n                  (ngModelChange)=\"onPickerChange('datepicker')\"\r\n                  [showWeeks]=\"showWeeks\"\r\n                  [datepickerMode]=\"datepickerMode\"\r\n                  [minDate]=\"minDate\"\r\n                  [maxDate]=\"maxDate\"\r\n                  [dateDisabled]=\"dateDisabled\"></datepicker>\r\n      <timepicker *ngIf=\"showTime\"\r\n                  [(ngModel)]=\"localValue\"\r\n                  [min]=\"minDate\"\r\n                  [max]=\"maxDate\"\r\n                  [hourStep]=\"hourStep\"\r\n                  [minuteStep]=\"minuteStep\"\r\n                  [secondsStep]=\"secondsStep\"\r\n                  [showSeconds]=\"showSeconds\"\r\n                  [showMeridian]=\"showMeridian\"\r\n                  (ngModelChange)=\"onPickerChange('timepicker')\"></timepicker>\r\n    </li>\r\n    <li class=\"mx-2 mb-2\">\r\n      <span class=\"btn-group float-left\">\r\n          <button type=\"button\"\r\n                  (click)=\"onNow()\"\r\n                  *ngIf=\"nowButton.show\"\r\n                  [ngClass]=\"nowButton.cssClass\">{{ nowButton.label }}</button>\r\n          <button type=\"button\"\r\n                  (click)=\"onClear()\"\r\n                  *ngIf=\"clearButton.show\"\r\n                  [ngClass]=\"clearButton.cssClass\">{{ clearButton.label }}</button>\r\n      </span>\r\n      <span class=\"btn-group float-right\">\r\n          <button type=\"button\"\r\n                  (click)=\"onClose()\"\r\n                  *ngIf=\"closeButton.show\"\r\n                  [ngClass]=\"closeButton.cssClass\">{{ closeButton.label }}</button>\r\n      </span>\r\n    </li>\r\n  </ul>\r\n</div>\r\n", components: [{ type: i1.DatePickerComponent, selector: "datepicker", inputs: ["datepickerMode", "showWeeks", "monthColLimit", "yearColLimit", "activeDate", "initDate", "minDate", "maxDate", "minMode", "maxMode", "formatDay", "formatMonth", "formatYear", "formatDayHeader", "formatDayTitle", "formatMonthTitle", "startingDay", "yearRange", "onlyCurrentMonth", "shortcutPropagation", "customClass", "dateDisabled", "dayDisabled"], outputs: ["selectionDone", "activeDateChange"] }, { type: i2.TimepickerComponent, selector: "timepicker", inputs: ["hourStep", "minuteStep", "secondsStep", "readonlyInput", "disabled", "mousewheel", "arrowkeys", "showSpinners", "showMeridian", "showMinutes", "showSeconds", "meridians", "hoursPlaceholder", "minutesPlaceholder", "secondsPlaceholder", "min", "max"], outputs: ["isValid"] }], directives: [{ type: i3.BsDropdownDirective, selector: "[bsDropdown], [dropdown]", inputs: ["dropup", "autoClose", "isAnimated", "insideClick", "isDisabled", "isOpen", "placement", "triggers", "container"], outputs: ["onShown", "onHidden", "isOpenChange"], exportAs: ["bs-dropdown"] }, { type: i4.OffClickDirective, selector: "[offClick]", outputs: ["offClick"] }, { type: i3.BsDropdownMenuDirective, selector: "[bsDropdownMenu],[dropdownMenu]", exportAs: ["bs-dropdown-menu"] }, { type: i5.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { type: i5.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i6.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { type: i6.NgModel, selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.1.0", ngImport: i0, type: DatetimePopupComponent, decorators: [{
            type: Component,
            args: [{ selector: 'datetime-popup', styles: [], template: "<div [container]=\"appendTo\" (isOpenChange)=\"onOpenChange($event)\" [dropup]=\"isDropUp\" dropdown #dropdown=\"bs-dropdown\" [autoClose]=\"false\" (offClick)=\"onOffClick($event)\">\r\n  <ul class=\"datetime-popup dropdown-menu\" role=\"menu\" [ngClass]=\"{ 'show': dropdown.isOpen === true, 'body-container': appendTo == 'body', 'dropdown': !isDropUp, 'dropup': isDropUp }\" *dropdownMenu>\r\n    <li class=\"my-2 mx-2\">\r\n      <datepicker *ngIf=\"showDate\"\r\n                  [(ngModel)]=\"localValue\"\r\n                  (ngModelChange)=\"onPickerChange('datepicker')\"\r\n                  [showWeeks]=\"showWeeks\"\r\n                  [datepickerMode]=\"datepickerMode\"\r\n                  [minDate]=\"minDate\"\r\n                  [maxDate]=\"maxDate\"\r\n                  [dateDisabled]=\"dateDisabled\"></datepicker>\r\n      <timepicker *ngIf=\"showTime\"\r\n                  [(ngModel)]=\"localValue\"\r\n                  [min]=\"minDate\"\r\n                  [max]=\"maxDate\"\r\n                  [hourStep]=\"hourStep\"\r\n                  [minuteStep]=\"minuteStep\"\r\n                  [secondsStep]=\"secondsStep\"\r\n                  [showSeconds]=\"showSeconds\"\r\n                  [showMeridian]=\"showMeridian\"\r\n                  (ngModelChange)=\"onPickerChange('timepicker')\"></timepicker>\r\n    </li>\r\n    <li class=\"mx-2 mb-2\">\r\n      <span class=\"btn-group float-left\">\r\n          <button type=\"button\"\r\n                  (click)=\"onNow()\"\r\n                  *ngIf=\"nowButton.show\"\r\n                  [ngClass]=\"nowButton.cssClass\">{{ nowButton.label }}</button>\r\n          <button type=\"button\"\r\n                  (click)=\"onClear()\"\r\n                  *ngIf=\"clearButton.show\"\r\n                  [ngClass]=\"clearButton.cssClass\">{{ clearButton.label }}</button>\r\n      </span>\r\n      <span class=\"btn-group float-right\">\r\n          <button type=\"button\"\r\n                  (click)=\"onClose()\"\r\n                  *ngIf=\"closeButton.show\"\r\n                  [ngClass]=\"closeButton.cssClass\">{{ closeButton.label }}</button>\r\n      </span>\r\n    </li>\r\n  </ul>\r\n</div>\r\n" }]
        }], ctorParameters: function () { return [{ type: i0.ElementRef }]; }, propDecorators: { dropdown: [{
                type: ViewChild,
                args: ['dropdown', { static: true }]
            }], appendTo: [{
                type: Input
            }], value: [{
                type: Input
            }], valueChange: [{
                type: Output
            }], showPopup: [{
                type: Input
            }], showPopupChange: [{
                type: Output
            }], showDate: [{
                type: Input
            }], showTime: [{
                type: Input
            }], showWeeks: [{
                type: Input
            }], showMeridian: [{
                type: Input
            }], showSeconds: [{
                type: Input
            }], datepickerMode: [{
                type: Input
            }], initDate: [{
                type: Input
            }], minDate: [{
                type: Input
            }], maxDate: [{
                type: Input
            }], dateDisabled: [{
                type: Input
            }], nowButton: [{
                type: Input
            }], clearButton: [{
                type: Input
            }], closeButton: [{
                type: Input
            }], minuteStep: [{
                type: Input
            }], hourStep: [{
                type: Input
            }], secondsStep: [{
                type: Input
            }], onWindowScroll: [{
                type: HostListener,
                args: ['window:scroll', []]
            }, {
                type: HostListener,
                args: ['window:resize', []]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LWJvb3RzdHJhcC1kYXRldGltZS1wb3B1cC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9wcm9qZWN0cy9uZ3gtYm9vdHN0cmFwLWRhdGV0aW1lLXBvcHVwL3NyYy9saWIvbmd4LWJvb3RzdHJhcC1kYXRldGltZS1wb3B1cC5jb21wb25lbnQudHMiLCIuLi8uLi8uLi9wcm9qZWN0cy9uZ3gtYm9vdHN0cmFwLWRhdGV0aW1lLXBvcHVwL3NyYy9saWIvbmd4LWJvb3RzdHJhcC1kYXRldGltZS1wb3B1cC5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQ0wsU0FBUyxFQUVULFlBQVksRUFBRSxZQUFZLEVBQzFCLEtBQUssRUFFTCxNQUFNLEVBQ04sU0FBUyxFQUNWLE1BQU0sZUFBZSxDQUFDOzs7Ozs7OztBQVd2QixNQUFNLE9BQU8sc0JBQXNCO0lBd0VqQyxZQUFvQixVQUFzQjtRQUF0QixlQUFVLEdBQVYsVUFBVSxDQUFZO1FBbEVuQyxhQUFRLEdBQVcsU0FBUyxDQUFDO1FBTTdCLGdCQUFXLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQUdqQyxjQUFTLEdBQUcsS0FBSyxDQUFDO1FBR2xCLG9CQUFlLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQUdyQyxhQUFRLEdBQUcsSUFBSSxDQUFDO1FBR2hCLGFBQVEsR0FBRyxJQUFJLENBQUM7UUFHaEIsY0FBUyxHQUFHLEtBQUssQ0FBQztRQUdsQixpQkFBWSxHQUFHLEtBQUssQ0FBQztRQUdyQixnQkFBVyxHQUFHLEtBQUssQ0FBQztRQUdwQixtQkFBYyxHQUFHLEtBQUssQ0FBQztRQUd2QixhQUFRLEdBQVMsSUFBSSxDQUFDO1FBR3RCLFlBQU8sR0FBUyxJQUFJLENBQUM7UUFHckIsWUFBTyxHQUFTLElBQUksQ0FBQztRQUdyQixpQkFBWSxHQUFVLEVBQUUsQ0FBQztRQVl6QixlQUFVLEdBQUcsQ0FBQyxDQUFDO1FB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QkNuQm5DLG1wRUEwQ0E7MkZEdkJhLHNCQUFzQjtrQkFQbEMsU0FBUzsrQkFDRSxnQkFBZ0IsVUFFbEIsRUFDUDtpR0FNTSxRQUFRO3NCQURkLFNBQVM7dUJBQUMsVUFBVSxFQUFFLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRTtnQkFJaEMsUUFBUTtzQkFEZCxLQUFLO2dCQUlDLEtBQUs7c0JBRFgsS0FBSztnQkFJQyxXQUFXO3NCQURqQixNQUFNO2dCQUlBLFNBQVM7c0JBRGYsS0FBSztnQkFJQyxlQUFlO3NCQURyQixNQUFNO2dCQUlBLFFBQVE7c0JBRGQsS0FBSztnQkFJQyxRQUFRO3NCQURkLEtBQUs7Z0JBSUMsU0FBUztzQkFEZixLQUFLO2dCQUlDLFlBQVk7c0JBRGxCLEtBQUs7Z0JBSUMsV0FBVztzQkFEakIsS0FBSztnQkFJQyxjQUFjO3NCQURwQixLQUFLO2dCQUlDLFFBQVE7c0JBRGQsS0FBSztnQkFJQyxPQUFPO3NCQURiLEtBQUs7Z0JBSUMsT0FBTztzQkFEYixLQUFLO2dCQUlDLFlBQVk7c0JBRGxCLEtBQUs7Z0JBSUMsU0FBUztzQkFEZixLQUFLO2dCQUlDLFdBQVc7c0JBRGpCLEtBQUs7Z0JBSUMsV0FBVztzQkFEakIsS0FBSztnQkFJQyxVQUFVO3NCQURoQixLQUFLO2dCQUlDLFFBQVE7c0JBRGQsS0FBSztnQkFJQyxXQUFXO3NCQURqQixLQUFLO2dCQTZDQyxjQUFjO3NCQUZwQixZQUFZO3VCQUFDLGVBQWUsRUFBRSxFQUFFOztzQkFDaEMsWUFBWTt1QkFBQyxlQUFlLEVBQUUsRUFBRSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XHJcbiAgQ29tcG9uZW50LFxyXG4gIEVsZW1lbnRSZWYsXHJcbiAgRXZlbnRFbWl0dGVyLCBIb3N0TGlzdGVuZXIsXHJcbiAgSW5wdXQsXHJcbiAgT25DaGFuZ2VzLFxyXG4gIE91dHB1dCxcclxuICBWaWV3Q2hpbGRcclxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgSURhdGV0aW1lUG9wdXBCdXR0b25PcHRpb25zIH0gZnJvbSAnLi9uZ3gtYm9vdHN0cmFwLWRhdGV0aW1lLXBvcHVwLWJvdHRvbi1vcHRpb25zLmludGVyZmFjZSc7XHJcbmltcG9ydCB7IEJzRHJvcGRvd25EaXJlY3RpdmUgfSBmcm9tICduZ3gtYm9vdHN0cmFwL2Ryb3Bkb3duJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnZGF0ZXRpbWUtcG9wdXAnLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9uZ3gtYm9vdHN0cmFwLWRhdGV0aW1lLXBvcHVwLmNvbXBvbmVudC5odG1sJyAsXHJcbiAgc3R5bGVzOiBbXHJcbiAgXSxcclxufSlcclxuXHJcbmV4cG9ydCBjbGFzcyBEYXRldGltZVBvcHVwQ29tcG9uZW50IGltcGxlbWVudHMgT25DaGFuZ2VzIHtcclxuXHJcbiAgQFZpZXdDaGlsZCgnZHJvcGRvd24nLCB7IHN0YXRpYzogdHJ1ZSB9KVxyXG4gIHB1YmxpYyBkcm9wZG93bjogQnNEcm9wZG93bkRpcmVjdGl2ZTtcclxuXHJcbiAgQElucHV0KClcclxuICBwdWJsaWMgYXBwZW5kVG86IHN0cmluZyA9IHVuZGVmaW5lZDtcclxuXHJcbiAgQElucHV0KClcclxuICBwdWJsaWMgdmFsdWU6IERhdGU7XHJcblxyXG4gIEBPdXRwdXQoKVxyXG4gIHB1YmxpYyB2YWx1ZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgQElucHV0KClcclxuICBwdWJsaWMgc2hvd1BvcHVwID0gZmFsc2U7XHJcblxyXG4gIEBPdXRwdXQoKVxyXG4gIHB1YmxpYyBzaG93UG9wdXBDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gIEBJbnB1dCgpXHJcbiAgcHVibGljIHNob3dEYXRlID0gdHJ1ZTtcclxuXHJcbiAgQElucHV0KClcclxuICBwdWJsaWMgc2hvd1RpbWUgPSB0cnVlO1xyXG5cclxuICBASW5wdXQoKVxyXG4gIHB1YmxpYyBzaG93V2Vla3MgPSBmYWxzZTtcclxuXHJcbiAgQElucHV0KClcclxuICBwdWJsaWMgc2hvd01lcmlkaWFuID0gZmFsc2U7XHJcblxyXG4gIEBJbnB1dCgpXHJcbiAgcHVibGljIHNob3dTZWNvbmRzID0gZmFsc2U7XHJcblxyXG4gIEBJbnB1dCgpXHJcbiAgcHVibGljIGRhdGVwaWNrZXJNb2RlID0gJ2RheSc7XHJcblxyXG4gIEBJbnB1dCgpXHJcbiAgcHVibGljIGluaXREYXRlOiBEYXRlID0gbnVsbDtcclxuXHJcbiAgQElucHV0KClcclxuICBwdWJsaWMgbWluRGF0ZTogRGF0ZSA9IG51bGw7XHJcblxyXG4gIEBJbnB1dCgpXHJcbiAgcHVibGljIG1heERhdGU6IERhdGUgPSBudWxsO1xyXG5cclxuICBASW5wdXQoKVxyXG4gIHB1YmxpYyBkYXRlRGlzYWJsZWQ6IGFueVtdID0gW107XHJcblxyXG4gIEBJbnB1dCgpXHJcbiAgcHVibGljIG5vd0J1dHRvbjogSURhdGV0aW1lUG9wdXBCdXR0b25PcHRpb25zO1xyXG5cclxuICBASW5wdXQoKVxyXG4gIHB1YmxpYyBjbGVhckJ1dHRvbjogSURhdGV0aW1lUG9wdXBCdXR0b25PcHRpb25zO1xyXG5cclxuICBASW5wdXQoKVxyXG4gIHB1YmxpYyBjbG9zZUJ1dHRvbjogSURhdGV0aW1lUG9wdXBCdXR0b25PcHRpb25zO1xyXG5cclxuICBASW5wdXQoKVxyXG4gIHB1YmxpYyBtaW51dGVTdGVwID0gNTtcclxuXHJcbiAgQElucHV0KClcclxuICBwdWJsaWMgaG91clN0ZXAgPSAxO1xyXG5cclxuICBASW5wdXQoKVxyXG4gIHB1YmxpYyBzZWNvbmRzU3RlcCA9IDE7XHJcblxyXG4gIHB1YmxpYyBsb2NhbFZhbHVlOiBEYXRlID0gbnVsbDtcclxuICBwdWJsaWMgaXNPcGVuaW5nID0gZmFsc2U7XHJcbiAgcHVibGljIGlzRHJvcFVwID0gZmFsc2U7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgZWxlbWVudFJlZjogRWxlbWVudFJlZikge1xyXG5cclxuICB9XHJcblxyXG4gIHB1YmxpYyBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBhbnkpIHtcclxuICAgIGlmICghdGhpcy5ub3dCdXR0b24pIHtcclxuICAgICAgdGhpcy5ub3dCdXR0b24gPSB7IHNob3c6IHRydWUsIGxhYmVsOiAnTm93JywgY3NzQ2xhc3M6ICdidG4gYnRuLXNlY29uZGFyeSBidG4tc20nfTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIXRoaXMuY2xlYXJCdXR0b24pIHtcclxuICAgICAgdGhpcy5jbGVhckJ1dHRvbiA9IHsgc2hvdzogdHJ1ZSwgbGFiZWw6ICdDbGVhcicsIGNzc0NsYXNzOiAnYnRuIGJ0bi1zZWNvbmRhcnkgYnRuLXNtJ307XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCF0aGlzLmNsb3NlQnV0dG9uKSB7XHJcbiAgICAgIHRoaXMuY2xvc2VCdXR0b24gPSB7IHNob3c6IHRydWUsIGxhYmVsOiAnQ2xvc2UnLCBjc3NDbGFzczogJ2J0biBidG4tc2Vjb25kYXJ5IGJ0bi1zbSd9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHVzZXIgbWF5YmUgdHlwaW5nIGEgdmFsdWUgaW50byBhbiBpbnB1dCBib3gsIHNvIHdvdWxkIGNvbWUgaW4gYXMgc3RyaW5nXHJcbiAgICBpZiAodHlwZW9mIHRoaXMudmFsdWUgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgIC8vIGNoZWNrIGlmIHRoZSBzdHJpbmcgaXMgYSB2YWxpZCBkYXRlXHJcbiAgICAgIGlmICghaXNOYU4obmV3IERhdGUodGhpcy52YWx1ZSkuZ2V0VGltZSgpKSkge1xyXG4gICAgICAgIHRoaXMubG9jYWxWYWx1ZSA9IG5ldyBEYXRlKHRoaXMudmFsdWUpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMudmFsdWUpIHtcclxuICAgICAgdGhpcy5sb2NhbFZhbHVlID0gdGhpcy52YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoY2hhbmdlcy5zaG93UG9wdXAgJiYgdGhpcy5kcm9wZG93bikge1xyXG4gICAgICBpZiAoY2hhbmdlcy5zaG93UG9wdXAuY3VycmVudFZhbHVlID09PSB0cnVlKSB7XHJcbiAgICAgICAgdGhpcy5kcm9wZG93bi5zaG93KCk7XHJcbiAgICAgIH0gZWxzZSBpZiAoY2hhbmdlcy5zaG93UG9wdXAuY3VycmVudFZhbHVlID09PSBmYWxzZSkge1xyXG4gICAgICAgIHRoaXMuZHJvcGRvd24uaGlkZSgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBASG9zdExpc3RlbmVyKCd3aW5kb3c6c2Nyb2xsJywgW10pXHJcbiAgQEhvc3RMaXN0ZW5lcignd2luZG93OnJlc2l6ZScsIFtdKVxyXG4gIHB1YmxpYyBvbldpbmRvd1Njcm9sbCgpIHtcclxuICAgIGNvbnN0IG5hdGl2ZUVsOiBIVE1MRWxlbWVudCA9IHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50O1xyXG4gICAgY29uc3QgY2xpZW50UmVjdDogQ2xpZW50UmVjdCA9IG5hdGl2ZUVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgY29uc3Qgc2Nyb2xsVG9wID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDtcclxuICAgIGNvbnN0IG9mZnNldFRvcCA9IGNsaWVudFJlY3QudG9wICsgd2luZG93LnBhZ2VZT2Zmc2V0O1xyXG4gICAgY29uc3QgaGVpZ2h0ID0gY2xpZW50UmVjdC5oZWlnaHQ7XHJcbiAgICBjb25zdCBkcm9wZG93bkVsOiBIVE1MRWxlbWVudCA9IG5hdGl2ZUVsLmNoaWxkcmVuLml0ZW0oMCkgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICBjb25zdCBtZW51RWw6IEhUTUxFbGVtZW50ID0gZHJvcGRvd25FbC5jaGlsZHJlbi5sZW5ndGggPiAwID8gZHJvcGRvd25FbC5jaGlsZHJlbi5pdGVtKDApIGFzIEhUTUxFbGVtZW50IDogbnVsbDtcclxuICAgIGxldCBtZW51SGVpZ2h0ID0gdGhpcy5zaG93RGF0ZSAmJiB0aGlzLnNob3dUaW1lID8gNDAyIDogdGhpcy5zaG93RGF0ZSA/IDMwMCA6IDEwMjtcclxuXHJcbiAgICBpZiAobWVudUVsICE9IG51bGwpIHtcclxuICAgICAgLy8gZ2V0IHRoZSBzdHlsZVxyXG4gICAgICBjb25zdCBkaXNwbGF5ID0gbWVudUVsLnN0eWxlLmRpc3BsYXk7XHJcbiAgICAgIG1lbnVFbC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuXHJcbiAgICAgIG1lbnVIZWlnaHQgPSBtZW51RWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xyXG4gICAgICBtZW51RWwuc3R5bGUuZGlzcGxheSA9IGRpc3BsYXk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKChvZmZzZXRUb3AgLSBtZW51SGVpZ2h0KSA8PSAwKSB7XHJcbiAgICAgIHRoaXMuaXNEcm9wVXAgPSBmYWxzZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuaXNEcm9wVXAgPSAoKG9mZnNldFRvcCArIGhlaWdodCArIG1lbnVIZWlnaHQpID4gKHNjcm9sbFRvcCArIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBvbk9wZW5DaGFuZ2Uob3BlbmVkOiBib29sZWFuKSB7XHJcbiAgICBpZiAob3BlbmVkID09PSB0cnVlKSB7XHJcbiAgICAgIHRoaXMuaXNPcGVuaW5nID0gdHJ1ZTtcclxuICAgICAgdGhpcy5vbldpbmRvd1Njcm9sbCgpO1xyXG4gICAgICB0aGlzLmRyb3Bkb3duLnNob3coKTtcclxuXHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5pc09wZW5pbmcgPSBmYWxzZSwgMjUwKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuc2hvd1BvcHVwQ2hhbmdlLmVtaXQoZmFsc2UpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIG9uTm93KCkge1xyXG4gICAgdGhpcy5sb2NhbFZhbHVlID0gbmV3IERhdGUoKTtcclxuICAgIHRoaXMub25QaWNrZXJDaGFuZ2UoJ3RpbWVwaWNrZXInKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBvbkNsZWFyKCkge1xyXG4gICAgdGhpcy52YWx1ZUNoYW5nZS5lbWl0KG51bGwpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIG9uQ2xvc2UoKSB7XHJcbiAgICB0aGlzLnNob3dQb3B1cENoYW5nZS5lbWl0KGZhbHNlKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBvbk9mZkNsaWNrKCRldmVudDogYW55KSB7XHJcbiAgICB0aGlzLnNob3dQb3B1cENoYW5nZS5lbWl0KGZhbHNlKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBvblBpY2tlckNoYW5nZShwaWNrZXI6IHN0cmluZykge1xyXG4gICAgaWYgKHRoaXMuaXNPcGVuaW5nID09PSB0cnVlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAocGlja2VyID09PSAnZGF0ZXBpY2tlcicgJiYgdGhpcy52YWx1ZSAhPSBudWxsKSB7XHJcbiAgICAgIGNvbnN0IGhvdXJzID0gdGhpcy52YWx1ZS5nZXRIb3VycygpO1xyXG4gICAgICBjb25zdCBtaW51dGVzID0gdGhpcy52YWx1ZS5nZXRNaW51dGVzKCk7XHJcbiAgICAgIGNvbnN0IHNlY29uZHMgPSB0aGlzLnZhbHVlLmdldFNlY29uZHMoKTtcclxuICAgICAgY29uc3QgbWlsbGlzZWNvbmRzID0gdGhpcy52YWx1ZS5nZXRNaWxsaXNlY29uZHMoKTtcclxuXHJcbiAgICAgIHRoaXMubG9jYWxWYWx1ZS5zZXRIb3Vycyhob3VycywgbWludXRlcywgc2Vjb25kcywgbWlsbGlzZWNvbmRzKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnZhbHVlQ2hhbmdlLmVtaXQodGhpcy5sb2NhbFZhbHVlKTtcclxuXHJcbiAgICBpZiAodGhpcy5zaG93RGF0ZSA9PT0gdHJ1ZSAmJiB0aGlzLnNob3dUaW1lID09PSBmYWxzZSkge1xyXG4gICAgICB0aGlzLmRyb3Bkb3duLmhpZGUoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG59XHJcbiIsIjxkaXYgW2NvbnRhaW5lcl09XCJhcHBlbmRUb1wiIChpc09wZW5DaGFuZ2UpPVwib25PcGVuQ2hhbmdlKCRldmVudClcIiBbZHJvcHVwXT1cImlzRHJvcFVwXCIgZHJvcGRvd24gI2Ryb3Bkb3duPVwiYnMtZHJvcGRvd25cIiBbYXV0b0Nsb3NlXT1cImZhbHNlXCIgKG9mZkNsaWNrKT1cIm9uT2ZmQ2xpY2soJGV2ZW50KVwiPlxyXG4gIDx1bCBjbGFzcz1cImRhdGV0aW1lLXBvcHVwIGRyb3Bkb3duLW1lbnVcIiByb2xlPVwibWVudVwiIFtuZ0NsYXNzXT1cInsgJ3Nob3cnOiBkcm9wZG93bi5pc09wZW4gPT09IHRydWUsICdib2R5LWNvbnRhaW5lcic6IGFwcGVuZFRvID09ICdib2R5JywgJ2Ryb3Bkb3duJzogIWlzRHJvcFVwLCAnZHJvcHVwJzogaXNEcm9wVXAgfVwiICpkcm9wZG93bk1lbnU+XHJcbiAgICA8bGkgY2xhc3M9XCJteS0yIG14LTJcIj5cclxuICAgICAgPGRhdGVwaWNrZXIgKm5nSWY9XCJzaG93RGF0ZVwiXHJcbiAgICAgICAgICAgICAgICAgIFsobmdNb2RlbCldPVwibG9jYWxWYWx1ZVwiXHJcbiAgICAgICAgICAgICAgICAgIChuZ01vZGVsQ2hhbmdlKT1cIm9uUGlja2VyQ2hhbmdlKCdkYXRlcGlja2VyJylcIlxyXG4gICAgICAgICAgICAgICAgICBbc2hvd1dlZWtzXT1cInNob3dXZWVrc1wiXHJcbiAgICAgICAgICAgICAgICAgIFtkYXRlcGlja2VyTW9kZV09XCJkYXRlcGlja2VyTW9kZVwiXHJcbiAgICAgICAgICAgICAgICAgIFttaW5EYXRlXT1cIm1pbkRhdGVcIlxyXG4gICAgICAgICAgICAgICAgICBbbWF4RGF0ZV09XCJtYXhEYXRlXCJcclxuICAgICAgICAgICAgICAgICAgW2RhdGVEaXNhYmxlZF09XCJkYXRlRGlzYWJsZWRcIj48L2RhdGVwaWNrZXI+XHJcbiAgICAgIDx0aW1lcGlja2VyICpuZ0lmPVwic2hvd1RpbWVcIlxyXG4gICAgICAgICAgICAgICAgICBbKG5nTW9kZWwpXT1cImxvY2FsVmFsdWVcIlxyXG4gICAgICAgICAgICAgICAgICBbbWluXT1cIm1pbkRhdGVcIlxyXG4gICAgICAgICAgICAgICAgICBbbWF4XT1cIm1heERhdGVcIlxyXG4gICAgICAgICAgICAgICAgICBbaG91clN0ZXBdPVwiaG91clN0ZXBcIlxyXG4gICAgICAgICAgICAgICAgICBbbWludXRlU3RlcF09XCJtaW51dGVTdGVwXCJcclxuICAgICAgICAgICAgICAgICAgW3NlY29uZHNTdGVwXT1cInNlY29uZHNTdGVwXCJcclxuICAgICAgICAgICAgICAgICAgW3Nob3dTZWNvbmRzXT1cInNob3dTZWNvbmRzXCJcclxuICAgICAgICAgICAgICAgICAgW3Nob3dNZXJpZGlhbl09XCJzaG93TWVyaWRpYW5cIlxyXG4gICAgICAgICAgICAgICAgICAobmdNb2RlbENoYW5nZSk9XCJvblBpY2tlckNoYW5nZSgndGltZXBpY2tlcicpXCI+PC90aW1lcGlja2VyPlxyXG4gICAgPC9saT5cclxuICAgIDxsaSBjbGFzcz1cIm14LTIgbWItMlwiPlxyXG4gICAgICA8c3BhbiBjbGFzcz1cImJ0bi1ncm91cCBmbG9hdC1sZWZ0XCI+XHJcbiAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIlxyXG4gICAgICAgICAgICAgICAgICAoY2xpY2spPVwib25Ob3coKVwiXHJcbiAgICAgICAgICAgICAgICAgICpuZ0lmPVwibm93QnV0dG9uLnNob3dcIlxyXG4gICAgICAgICAgICAgICAgICBbbmdDbGFzc109XCJub3dCdXR0b24uY3NzQ2xhc3NcIj57eyBub3dCdXR0b24ubGFiZWwgfX08L2J1dHRvbj5cclxuICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiXHJcbiAgICAgICAgICAgICAgICAgIChjbGljayk9XCJvbkNsZWFyKClcIlxyXG4gICAgICAgICAgICAgICAgICAqbmdJZj1cImNsZWFyQnV0dG9uLnNob3dcIlxyXG4gICAgICAgICAgICAgICAgICBbbmdDbGFzc109XCJjbGVhckJ1dHRvbi5jc3NDbGFzc1wiPnt7IGNsZWFyQnV0dG9uLmxhYmVsIH19PC9idXR0b24+XHJcbiAgICAgIDwvc3Bhbj5cclxuICAgICAgPHNwYW4gY2xhc3M9XCJidG4tZ3JvdXAgZmxvYXQtcmlnaHRcIj5cclxuICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiXHJcbiAgICAgICAgICAgICAgICAgIChjbGljayk9XCJvbkNsb3NlKClcIlxyXG4gICAgICAgICAgICAgICAgICAqbmdJZj1cImNsb3NlQnV0dG9uLnNob3dcIlxyXG4gICAgICAgICAgICAgICAgICBbbmdDbGFzc109XCJjbG9zZUJ1dHRvbi5jc3NDbGFzc1wiPnt7IGNsb3NlQnV0dG9uLmxhYmVsIH19PC9idXR0b24+XHJcbiAgICAgIDwvc3Bhbj5cclxuICAgIDwvbGk+XHJcbiAgPC91bD5cclxuPC9kaXY+XHJcbiJdfQ==